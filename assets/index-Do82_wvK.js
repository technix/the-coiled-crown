(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var ie,b,Dt,B,it,zt,Te,Be,Ae,Oe,Bt,ee={},Wt=[],En=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,be=Array.isArray;function M(e,t){for(var n in t)e[n]=t[n];return e}function Ut(e){var t=e.parentNode;t&&t.removeChild(e)}function te(e,t,n){var o,r,i,s={};for(i in t)i=="key"?o=t[i]:i=="ref"?r=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?ie.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)s[i]===void 0&&(s[i]=e.defaultProps[i]);return Q(e,s,o,r,null)}function Q(e,t,n,o,r){var i={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++Dt,__i:-1,__u:0};return r==null&&b.vnode!=null&&b.vnode(i),i}function V(e){return e.children}function Z(e,t){this.props=e,this.context=t}function U(e,t){if(t==null)return e.__?U(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?U(e):null}function Nt(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Nt(e)}}function Re(e){(!e.__d&&(e.__d=!0)&&B.push(e)&&!me.__r++||it!==b.debounceRendering)&&((it=b.debounceRendering)||zt)(me)}function me(){var e,t,n,o,r,i,s,l;for(B.sort(Te);e=B.shift();)e.__d&&(t=B.length,o=void 0,i=(r=(n=e).__v).__e,s=[],l=[],n.__P&&((o=M({},r)).__v=r.__v+1,b.vnode&&b.vnode(o),We(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[i]:null,s,i??U(r),!!(32&r.__u),l),o.__v=r.__v,o.__.__k[o.__i]=o,Yt(s,o,l),o.__e!=i&&Nt(o)),B.length>t&&B.sort(Te));me.__r=0}function qt(e,t,n,o,r,i,s,l,u,_,f){var a,p,d,h,k,y=o&&o.__k||Wt,m=t.length;for(n.__d=u,Sn(n,t,y),u=n.__d,a=0;a<m;a++)(d=n.__k[a])!=null&&typeof d!="boolean"&&typeof d!="function"&&(p=d.__i===-1?ee:y[d.__i]||ee,d.__i=a,We(e,d,p,r,i,s,l,u,_,f),h=d.__e,d.ref&&p.ref!=d.ref&&(p.ref&&Ue(p.ref,null,d),f.push(d.ref,d.__c||h,d)),k==null&&h!=null&&(k=h),65536&d.__u||p.__k===d.__k?(u&&!u.isConnected&&(u=U(p)),u=Gt(d,u,e)):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:h&&(u=h.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=k}function Sn(e,t,n){var o,r,i,s,l,u=t.length,_=n.length,f=_,a=0;for(e.__k=[],o=0;o<u;o++)s=o+a,(r=e.__k[o]=(r=t[o])==null||typeof r=="boolean"||typeof r=="function"?null:typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?Q(null,r,null,null,null):be(r)?Q(V,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?Q(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)!=null?(r.__=e,r.__b=e.__b+1,l=Cn(r,n,s,f),r.__i=l,i=null,l!==-1&&(f--,(i=n[l])&&(i.__u|=131072)),i==null||i.__v===null?(l==-1&&a--,typeof r.type!="function"&&(r.__u|=65536)):l!==s&&(l===s+1?a++:l>s?f>u-s?a+=l-s:a--:l<s?l==s-1&&(a=l-s):a=0,l!==o+a&&(r.__u|=65536))):(i=n[s])&&i.key==null&&i.__e&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=U(i)),Fe(i,i,!1),n[s]=null,f--);if(f)for(o=0;o<_;o++)(i=n[o])!=null&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=U(i)),Fe(i,i))}function Gt(e,t,n){var o,r;if(typeof e.type=="function"){for(o=e.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=e,t=Gt(o[r],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function Ie(e,t){return t=t||[],e==null||typeof e=="boolean"||(be(e)?e.some(function(n){Ie(n,t)}):t.push(e)),t}function Cn(e,t,n,o){var r=e.key,i=e.type,s=n-1,l=n+1,u=t[n];if(u===null||u&&r==u.key&&i===u.type&&!(131072&u.__u))return n;if(o>(u!=null&&!(131072&u.__u)?1:0))for(;s>=0||l<t.length;){if(s>=0){if((u=t[s])&&!(131072&u.__u)&&r==u.key&&i===u.type)return s;s--}if(l<t.length){if((u=t[l])&&!(131072&u.__u)&&r==u.key&&i===u.type)return l;l++}}return-1}function st(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||En.test(t)?n:n+"px"}function le(e,t,n,o,r){var i;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||st(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||st(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?o?n.u=o.u:(n.u=Be,e.addEventListener(t,i?Oe:Ae,i)):e.removeEventListener(t,i?Oe:Ae,i);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function ct(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=Be++;else if(t.t<n.u)return;return n(b.event?b.event(t):t)}}}function We(e,t,n,o,r,i,s,l,u,_){var f,a,p,d,h,k,y,m,w,g,v,E,x,P,K,L=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),i=[l=t.__e=n.__e]),(f=b.__b)&&f(t);e:if(typeof L=="function")try{if(m=t.props,w=(f=L.contextType)&&o[f.__c],g=f?w?w.props.value:f.__:o,n.__c?y=(a=t.__c=n.__c).__=a.__E:("prototype"in L&&L.prototype.render?t.__c=a=new L(m,g):(t.__c=a=new Z(m,g),a.constructor=L,a.render=Ln),w&&w.sub(a),a.props=m,a.state||(a.state={}),a.context=g,a.__n=o,p=a.__d=!0,a.__h=[],a._sb=[]),a.__s==null&&(a.__s=a.state),L.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=M({},a.__s)),M(a.__s,L.getDerivedStateFromProps(m,a.__s))),d=a.props,h=a.state,a.__v=t,p)L.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(L.getDerivedStateFromProps==null&&m!==d&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(m,g),!a.__e&&(a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(m,a.__s,g)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(a.props=m,a.state=a.__s,a.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(H){H&&(H.__=t)}),v=0;v<a._sb.length;v++)a.__h.push(a._sb[v]);a._sb=[],a.__h.length&&s.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(m,a.__s,g),a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(d,h,k)})}if(a.context=g,a.props=m,a.__P=e,a.__e=!1,E=b.__r,x=0,"prototype"in L&&L.prototype.render){for(a.state=a.__s,a.__d=!1,E&&E(t),f=a.render(a.props,a.state,a.context),P=0;P<a._sb.length;P++)a.__h.push(a._sb[P]);a._sb=[]}else do a.__d=!1,E&&E(t),f=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++x<25);a.state=a.__s,a.getChildContext!=null&&(o=M(M({},o),a.getChildContext())),p||a.getSnapshotBeforeUpdate==null||(k=a.getSnapshotBeforeUpdate(d,h)),qt(e,be(K=f!=null&&f.type===V&&f.key==null?f.props.children:f)?K:[K],t,n,o,r,i,s,l,u,_),a.base=t.__e,t.__u&=-161,a.__h.length&&s.push(a),y&&(a.__E=a.__=null)}catch(H){t.__v=null,u||i!=null?(t.__e=l,t.__u|=u?160:32,i[i.indexOf(l)]=null):(t.__e=n.__e,t.__k=n.__k),b.__e(H,t,n)}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=xn(n.__e,t,n,o,r,i,s,u,_);(f=b.diffed)&&f(t)}function Yt(e,t,n){t.__d=void 0;for(var o=0;o<n.length;o++)Ue(n[o],n[++o],n[++o]);b.__c&&b.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(i){i.call(r)})}catch(i){b.__e(i,r.__v)}})}function xn(e,t,n,o,r,i,s,l,u){var _,f,a,p,d,h,k,y=n.props,m=t.props,w=t.type;if(w==="svg"?r="http://www.w3.org/2000/svg":w==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),i!=null){for(_=0;_<i.length;_++)if((d=i[_])&&"setAttribute"in d==!!w&&(w?d.localName===w:d.nodeType===3)){e=d,i[_]=null;break}}if(e==null){if(w===null)return document.createTextNode(m);e=document.createElementNS(r,w,m.is&&m),i=null,l=!1}if(w===null)y===m||l&&e.data===m||(e.data=m);else{if(i=i&&ie.call(e.childNodes),y=n.props||ee,!l&&i!=null)for(y={},_=0;_<e.attributes.length;_++)y[(d=e.attributes[_]).name]=d.value;for(_ in y)if(d=y[_],_!="children"){if(_=="dangerouslySetInnerHTML")a=d;else if(_!=="key"&&!(_ in m)){if(_=="value"&&"defaultValue"in m||_=="checked"&&"defaultChecked"in m)continue;le(e,_,null,d,r)}}for(_ in m)d=m[_],_=="children"?p=d:_=="dangerouslySetInnerHTML"?f=d:_=="value"?h=d:_=="checked"?k=d:_==="key"||l&&typeof d!="function"||y[_]===d||le(e,_,d,y[_],r);if(f)l||a&&(f.__html===a.__html||f.__html===e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(a&&(e.innerHTML=""),qt(e,be(p)?p:[p],t,n,o,w==="foreignObject"?"http://www.w3.org/1999/xhtml":r,i,s,i?i[0]:n.__k&&U(n,0),l,u),i!=null)for(_=i.length;_--;)i[_]!=null&&Ut(i[_]);l||(_="value",h!==void 0&&(h!==e[_]||w==="progress"&&!h||w==="option"&&h!==y[_])&&le(e,_,h,y[_],r),_="checked",k!==void 0&&k!==e[_]&&le(e,_,k,y[_],r))}return e}function Ue(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(o){b.__e(o,n)}}function Fe(e,t,n){var o,r;if(b.unmount&&b.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||Ue(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(i){b.__e(i,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&Fe(o[r],t,n||typeof e.type!="function");n||e.__e==null||Ut(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function Ln(e,t,n){return this.constructor(e,n)}function Pn(e,t,n){var o,r,i,s;b.__&&b.__(e,t),r=(o=typeof n=="function")?null:t.__k,i=[],s=[],We(t,e=(!o&&n||t).__k=te(V,null,[e]),r||ee,ee,t.namespaceURI,!o&&n?[n]:r?null:t.firstChild?ie.call(t.childNodes):null,i,!o&&n?n:r?r.__e:t.firstChild,o,s),Yt(i,e,s)}function Tn(e,t,n){var o,r,i,s,l=M({},e.props);for(i in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),t)i=="key"?o=t[i]:i=="ref"?r=t[i]:l[i]=t[i]===void 0&&s!==void 0?s[i]:t[i];return arguments.length>2&&(l.children=arguments.length>3?ie.call(arguments,2):n),Q(e.type,l,o||e.key,r||e.ref,null)}function Ne(e,t){var n={__c:t="__cC"+Bt++,__:e,Consumer:function(o,r){return o.children(r)},Provider:function(o){var r,i;return this.getChildContext||(r=[],(i={})[t]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(s){this.props.value!==s.value&&r.some(function(l){l.__e=!0,Re(l)})},this.sub=function(s){r.push(s);var l=s.componentWillUnmount;s.componentWillUnmount=function(){r.splice(r.indexOf(s),1),l&&l.call(s)}}),o.children}};return n.Provider.__=n.Consumer.contextType=n}ie=Wt.slice,b={__e:function(e,t,n,o){for(var r,i,s;t=t.__;)if((r=t.__c)&&!r.__)try{if((i=r.constructor)&&i.getDerivedStateFromError!=null&&(r.setState(i.getDerivedStateFromError(e)),s=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),s=r.__d),s)return r.__E=r}catch(l){e=l}throw e}},Dt=0,Z.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=M({},this.state),typeof e=="function"&&(e=e(M({},n),this.props)),e&&M(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Re(this))},Z.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Re(this))},Z.prototype.render=V,B=[],zt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Te=function(e,t){return e.__v.__b-t.__v.__b},me.__r=0,Be=0,Ae=ct(!1),Oe=ct(!0),Bt=0;var An=0;function c(e,t,n,o,r,i){t||(t={});var s,l,u=t;if("ref"in u)for(l in u={},t)l=="ref"?s=t[l]:u[l]=t[l];var _={type:e,props:u,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--An,__i:-1,__u:0,__source:r,__self:i};if(typeof e=="function"&&(s=e.defaultProps))for(l in s)u[l]===void 0&&(u[l]=s[l]);return b.vnode&&b.vnode(_),_}const On="modulepreload",Rn=function(e,t){return e[0]==="."?new URL(e,t).href:e},at={},lt=function(t,n,o){let r=Promise.resolve();if(n&&n.length>0){const i=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.all(n.map(u=>{if(u=Rn(u,o),u in at)return;at[u]=!0;const _=u.endsWith(".css"),f=_?'[rel="stylesheet"]':"";if(!!o)for(let d=i.length-1;d>=0;d--){const h=i[d];if(h.href===u&&(!_||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=_?"stylesheet":On,_||(p.as="script",p.crossOrigin=""),p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),_)return new Promise((d,h)=>{p.addEventListener("load",d),p.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}return r.then(()=>t()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})};var Y,$,Ee,ut,ne=0,Kt=[],he=[],S=b,_t=S.__b,dt=S.__r,ft=S.diffed,ht=S.__c,pt=S.unmount,gt=S.__;function ke(e,t){S.__h&&S.__h($,e,ne||t),ne=0;var n=$.__H||($.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:he}),n.__[e]}function R(e){return ne=1,In(Qt,e)}function In(e,t,n){var o=ke(Y++,2);if(o.t=e,!o.__c&&(o.__=[Qt(void 0,t),function(l){var u=o.__N?o.__N[0]:o.__[0],_=o.t(u,l);u!==_&&(o.__N=[_,o.__[1]],o.__c.setState({}))}],o.__c=$,!$.u)){var r=function(l,u,_){if(!o.__c.__H)return!0;var f=o.__c.__H.__.filter(function(p){return!!p.__c});if(f.every(function(p){return!p.__N}))return!i||i.call(this,l,u,_);var a=!1;return f.forEach(function(p){if(p.__N){var d=p.__[0];p.__=p.__N,p.__N=void 0,d!==p.__[0]&&(a=!0)}}),!(!a&&o.__c.props===l)&&(!i||i.call(this,l,u,_))};$.u=!0;var i=$.shouldComponentUpdate,s=$.componentWillUpdate;$.componentWillUpdate=function(l,u,_){if(this.__e){var f=i;i=void 0,r(l,u,_),i=f}s&&s.call(this,l,u,_)},$.shouldComponentUpdate=r}return o.__N||o.__}function A(e,t){var n=ke(Y++,3);!S.__s&&Jt(n.__H,t)&&(n.__=e,n.i=t,$.__H.__h.push(n))}function Fn(e){return ne=5,Xt(function(){return{current:e}},[])}function Xt(e,t){var n=ke(Y++,7);return Jt(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function O(e,t){return ne=8,Xt(function(){return e},t)}function qe(e){var t=$.context[e.__c],n=ke(Y++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub($)),t.props.value):e.__}function Mn(){for(var e;e=Kt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(pe),e.__H.__h.forEach(Me),e.__H.__h=[]}catch(t){e.__H.__h=[],S.__e(t,e.__v)}}S.__b=function(e){$=null,_t&&_t(e)},S.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),gt&&gt(e,t)},S.__r=function(e){dt&&dt(e),Y=0;var t=($=e.__c).__H;t&&(Ee===$?(t.__h=[],$.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=he,n.__N=n.i=void 0})):(t.__h.forEach(pe),t.__h.forEach(Me),t.__h=[],Y=0)),Ee=$},S.diffed=function(e){ft&&ft(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Kt.push(t)!==1&&ut===S.requestAnimationFrame||((ut=S.requestAnimationFrame)||Vn)(Mn)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==he&&(n.__=n.__V),n.i=void 0,n.__V=he})),Ee=$=null},S.__c=function(e,t){t.some(function(n){try{n.__h.forEach(pe),n.__h=n.__h.filter(function(o){return!o.__||Me(o)})}catch(o){t.some(function(r){r.__h&&(r.__h=[])}),t=[],S.__e(o,n.__v)}}),ht&&ht(e,t)},S.unmount=function(e){pt&&pt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{pe(o)}catch(r){t=r}}),n.__H=void 0,t&&S.__e(t,n.__v))};var mt=typeof requestAnimationFrame=="function";function Vn(e){var t,n=function(){clearTimeout(o),mt&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);mt&&(t=requestAnimationFrame(n))}function pe(e){var t=$,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),$=t}function Me(e){var t=$;e.__c=e.__(),$=t}function Jt(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function Qt(e,t){return typeof t=="function"?t(e):t}var Hn={};function ue(e,t){for(var n in t)e[n]=t[n];return e}function jn(e,t,n){var o,r=/(?:\?([^#]*))?(#.*)?$/,i=e.match(r),s={};if(i&&i[1])for(var l=i[1].split("&"),u=0;u<l.length;u++){var _=l[u].split("=");s[decodeURIComponent(_[0])]=decodeURIComponent(_.slice(1).join("="))}e=Ve(e.replace(r,"")),t=Ve(t||"");for(var f=Math.max(e.length,t.length),a=0;a<f;a++)if(t[a]&&t[a].charAt(0)===":"){var p=t[a].replace(/(^:|[+*?]+$)/g,""),d=(t[a].match(/[+*?]+$/)||Hn)[0]||"",h=~d.indexOf("+"),k=~d.indexOf("*"),y=e[a]||"";if(!y&&!k&&(d.indexOf("?")<0||h)){o=!1;break}if(s[p]=decodeURIComponent(y),h||k){s[p]=e.slice(a).map(decodeURIComponent).join("/");break}}else if(t[a]!==e[a]){o=!1;break}return(n.default===!0||o!==!1)&&s}function Dn(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function zn(e,t){return e.index=t,e.rank=function(n){return n.props.default?0:Ve(n.props.path).map(Bn).join("")}(e),e.props}function Ve(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function Bn(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var Wn={},W=[],vt=[],T=null,Zt={url:Ge()},Un=Ne(Zt);function Ge(){var e;return""+((e=T&&T.location?T.location:T&&T.getCurrentLocation?T.getCurrentLocation():typeof location<"u"?location:Wn).pathname||"")+(e.search||"")}function G(e,t){return t===void 0&&(t=!1),typeof e!="string"&&e.url&&(t=e.replace,e=e.url),function(n){for(var o=W.length;o--;)if(W[o].canRoute(n))return!0;return!1}(e)&&function(n,o){o===void 0&&(o="push"),T&&T[o]?T[o](n):typeof history<"u"&&history[o+"State"]&&history[o+"State"](null,null,n)}(e,t?"replace":"push"),en(e)}function en(e){for(var t=!1,n=0;n<W.length;n++)W[n].routeTo(e)&&(t=!0);return t}function Nn(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),n=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return G(t)}}function qn(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function Gn(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var t=e.target;do if(t.localName==="a"&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(Nn(t))return qn(e)}while(t=t.parentNode)}}var yt=!1;function tn(e){e.history&&(T=e.history),this.state={url:e.url||Ge()}}ue(tn.prototype=new Z,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var t=Ie(this.props.children);return this.g(t,e)!==void 0},routeTo:function(e){this.setState({url:e});var t=this.canRoute(e);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;yt||(yt=!0,T||addEventListener("popstate",function(){en(Ge())}),addEventListener("click",Gn)),W.push(this),T&&(this.u=T.listen(function(t){var n=t.location||t;e.routeTo(""+(n.pathname||"")+(n.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),W.splice(W.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,t){e=e.filter(zn).sort(Dn);for(var n=0;n<e.length;n++){var o=e[n],r=jn(t,o.props.path,o.props);if(r)return[o,r]}},render:function(e,t){var n,o,r=e.onChange,i=t.url,s=this.c,l=this.g(Ie(e.children),i);if(l&&(o=Tn(l[0],ue(ue({url:i,matches:n=l[1]},n),{key:void 0,ref:void 0}))),i!==(s&&s.url)){ue(Zt,s=this.c={url:i,previous:s&&s.url,current:o,path:o?o.props.path:null,matches:n}),s.router=this,s.active=o?[o]:[];for(var u=vt.length;u--;)vt[u]({});typeof r=="function"&&r(s)}return te(Un.Provider,{value:s},o)}});function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ve.apply(null,arguments)}var q;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(q||(q={}));var bt=function(e){return e};function Yn(e){e===void 0&&(e={});var t=e,n=t.initialEntries,o=n===void 0?["/"]:n,r=t.initialIndex,i=o.map(function(g){var v=bt(ve({pathname:"/",search:"",hash:"",state:null,key:$t()},typeof g=="string"?Et(g):g));return v}),s=kt(r??i.length-1,0,i.length-1),l=q.Pop,u=i[s],_=wt(),f=wt();function a(g){return typeof g=="string"?g:Kn(g)}function p(g,v){return v===void 0&&(v=null),bt(ve({pathname:u.pathname,search:"",hash:""},typeof g=="string"?Et(g):g,{state:v,key:$t()}))}function d(g,v,E){return!f.length||(f.call({action:g,location:v,retry:E}),!1)}function h(g,v){l=g,u=v,_.call({action:l,location:u})}function k(g,v){var E=q.Push,x=p(g,v);function P(){k(g,v)}d(E,x,P)&&(s+=1,i.splice(s,i.length,x),h(E,x))}function y(g,v){var E=q.Replace,x=p(g,v);function P(){y(g,v)}d(E,x,P)&&(i[s]=x,h(E,x))}function m(g){var v=kt(s+g,0,i.length-1),E=q.Pop,x=i[v];function P(){m(g)}d(E,x,P)&&(s=v,h(E,x))}var w={get index(){return s},get action(){return l},get location(){return u},createHref:a,push:k,replace:y,go:m,back:function(){m(-1)},forward:function(){m(1)},listen:function(v){return _.push(v)},block:function(v){return f.push(v)}};return w}function kt(e,t,n){return Math.min(Math.max(e,t),n)}function wt(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter(function(o){return o!==n})}},call:function(n){e.forEach(function(o){return o&&o(n)})}}}function $t(){return Math.random().toString(36).substr(2,8)}function Kn(e){var t=e.pathname,n=t===void 0?"/":t,o=e.search,r=o===void 0?"":o,i=e.hash,s=i===void 0?"":i;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(n+=s.charAt(0)==="#"?s:"#"+s),n}function Et(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}var D,He=function(e,t){return He=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r])},He(e,t)},St=function(e){function t(n,o){var r=e.call(this,"Translation failed")||this;return r.id=n,r.language=o,r}return function(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+o+" is not a constructor or null");function r(){this.constructor=n}He(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}(t,e),t.is=function(n){return n instanceof t},t}(Error),Xn=function(){function e(t){this.input=t,this.index=0,this.done=!1,this.value="",this.value=this.input.charAt(0)}return e.prototype.next=function(){return++this.index>=this.input.length&&(this.done=!0),this.value=this.input.charAt(this.index)},e.prototype.croak=function(){throw Error("[".concat(this.input,']. Unexpected character "').concat(this.value,'" on position ').concat(this.index,"."))},e}();(function(e){e[e.Plural=0]="Plural",e[e.Select=1]="Select",e[e.Text=2]="Text",e[e.Variable=3]="Variable"})(D||(D={}));var Jn=["{","}",","],Qn=function(){function e(t){this.input=new Xn(t)}return e.prototype.next=function(){return this.input.value==="{"?this.readVariable():this.readText()},e.prototype.skip=function(t){t!==this.input.value&&this.input.croak(),this.input.next()},e.prototype.readWhile=function(t){for(var n="";!this.input.done&&t(this.input.value);)n+=this.input.value,this.input.next();return n},e.prototype.readVariable=function(){this.skip("{");var t=this.readWhile(function(o){return!function(r){return Jn.includes(r)}(o)}).trim();if(t.length===0&&this.input.croak(),this.input.value==="}")return this.skip("}"),{type:D.Variable,value:t};this.skip(",");var n=this.readVariableType();return{options:this.readVariableOptions(),type:n,value:t}},e.prototype.readText=function(){return{type:D.Text,value:this.readWhile(function(t){return t!=="{"&&t!=="}"})}},e.prototype.readVariableType=function(){var t=this.readWhile(function(n){return n!==","}).trim();return t==="plural"?D.Plural:t==="select"?D.Select:void this.input.croak()},e.prototype.readVariableOptions=function(){this.skip(",");for(var t={};this.input.value!=="}";)t[this.readText().value.trim()]=this.readExpression();return this.skip("}"),t},e.prototype.readExpression=function(){var t=[];for(this.skip("{");this.input.value!=="}";)t.push(this.next());return this.skip("}"),t},e}();function Zn(e,t,n){for(var o=new Qn(t),r=[],i=function(s){var l=s.options,u=s.type,_=s.value;if(u!==D.Variable)if(l)if(u!==D.Select)try{r.concat(l[new Intl.PluralRules(e).select(n[_])].map(i))}catch{r.concat(l.other.map(i))}else r.concat((l[n[_]]||l.other).map(i));else r.push(_);else r.push(n[_])};!o.input.done;)i(o.next());return r}var nn=function(e,t){e===void 0&&(e="en"),t===void 0&&(t=[]);var n=this;this.memo={},this.onError=console.error,this.formatDate=function(r,i){return new Intl.DateTimeFormat(n.language,i).format(r)},this.formatNumber=function(r,i){return new Intl.NumberFormat(n.language,i).format(r)},this.translate=function(r,i){i===void 0&&(i={});var s=n.getMessageById(r,i.defaultMessage);if(typeof s=="string")try{return Zn(n.language,s,i).join("")}catch{n.onError(new St(r,n.language))}return s+""},this.getMessageById=function(r,i){if(!n.memo[r]){var s=n.messages[r];s===void 0&&(s=r.split(".").reduce(function(l,u){return l?l[u]:void 0},n.messages)),typeof s!="string"&&(n.onError(new St(r,n.language)),s=i||r),n.memo[r]=s}return n.memo[r]};var o=t.find(function(r){return r.language===e});this.language=e,this.messages=o?o.messages:{}};function eo(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}var Ye=Ne({language:"",locales:[],setLanguage:function(){},translator:new nn}),to=function(e){var t=e.children,n=e.language,o=e.locales,r=e.onError,i=R(n);A(function(){i[1](n)},[n]);var s=new nn(i[0],o);return r&&(s.onError=r),te(Ye.Provider,{value:{language:i[0],locales:o,setLanguage:i[1],translator:s}},t)};function on(e){var t=qe(Ye);return t.translator}var F=function(e){var t=e.html,n=e.id,o=e.tagName,r=o===void 0?"span":o,i=eo(e,["children","html","id","tagName"]),s=qe(Ye).translator.translate(n,i);return t?te(r,{dangerouslySetInnerHTML:{__html:s}}):te(V,null,s)};const rn=Ne(null),no="The Coiled Crown",oo="the-coiled-crown-atrament",ro="The Coiled Crown - a gamebook by Sersa Victory",io="game",so="Lora",co="en",ao={path:"game",source:"the-coiled-crown.ink",script:"the-coiled-crown.ink.json"},se={name:no,short_name:oo,description:ro,theme:io,font:so,language:co,game:ao},sn=se.game.path,cn=se.game.script,lo=["Atrament://",window.location.host,window.location.pathname,sn,cn].join(""),uo=se.language,an=se.theme,ln=se.font,Ke=100,we=10,je=Ke-we*3,De=Ke+we*5;function _o(e){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"?e.interfaces.sound.mute(e.settings.get("mute")):e.interfaces.sound.mute(!0)})}let un=()=>{};function fo(e){un=e}function oe(e){return e?un(e):null}function ho(e){const t=e.state.get().metadata.theme||an;e.settings.get("theme")||e.settings.set("theme",t)}function po(e){const t=e.state.get().metadata.font||ln;e.settings.get("font")||e.settings.set("font",t)}const go={"--bg-color":"#EBCFB2","--fg-color":"#424B54","--shade-color":"rgba(0, 0, 0, 0.1)","--font-color":"#333333","--accent-bg-color":"#AD1C2A","--accent-fg-color":"#EBCFB2"},mo={"--bg-color":"#FCFCFC","--fg-color":"#5D576B","--shade-color":"rgba(0, 0, 0, 0.1)","--font-color":"#333333","--accent-bg-color":"#F7567C","--accent-fg-color":"#FCFCFC"},vo={"--bg-color":"#ffeedb","--fg-color":"#4c3b4d","--shade-color":"rgba(0, 0, 0, 0.1)","--font-color":"#333333","--accent-bg-color":"#a53850","--accent-fg-color":"#ffeedb"},yo={"--bg-color":"#4c3b4d","--fg-color":"#FCFCFC","--shade-color":"rgba(255, 255, 255, 0.1)","--font-color":"#EEEEEE","--accent-bg-color":"#F7567C","--accent-fg-color":"#EEEEEE"},ze={game:go,light:mo,sepia:vo,dark:yo};function bo(e){Object.entries(ze[e]||ze[an]).forEach(([t,n])=>{document.documentElement.style.setProperty(t,n)})}const j='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',re={System:`-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, ${j}`,"Sans Serif":`"Trebuchet MS", "Lucida Grande", Arial, Helvetica, ${j}`,Serif:`"Palatino", "Cambria", "Lucida Bright", "Georgia", "Times New Roman", ${j}`,Monospaced:`"Monaco", "Consolas", "Lucida Console", "Courier New", ${j}`,"Fira Sans":`"Fira Sans", sans-serif, ${j}`,Lora:`"Lora", serif, ${j}`,Merriweather:`"Merriweather", serif, ${j}`,OpenDyslexic:`"OpenDyslexic", serif, ${j}`};function ko(e){document.documentElement.style.setProperty("--font-game",re[e]||re[ln])}async function wo(e,t){if(e&&!document.fullscreenElement)try{await document.documentElement.requestFullscreen()}catch{t(!1)}else document.fullscreenElement&&document.exitFullscreen&&document.exitFullscreen()}function $o(e,t){wo(e,t)}function Eo(e){e.settings.defineHandler("theme",(t,n)=>{bo(n)}),e.settings.defineHandler("font",(t,n)=>{ko(n)}),e.settings.defineHandler("animation",(t,n)=>{n?document.documentElement.style.removeProperty("--animation-disabled"):document.documentElement.style.setProperty("--animation-disabled","0s")}),e.settings.defineHandler("fullscreen",(t,n)=>{$o(n,o=>{e.settings.set("fullscreen",o),e.settings.save()})})}function So(e){e.images=[],e.content=e.content.map(t=>(t.tags.IMAGE&&(e.images.push(t.tags.IMAGE),t.image=t.tags.IMAGE),t))}function Co(e){e.choices=e.choices.map(t=>((t.tags.UNCLICKABLE||t.tags.DISABLED||t.tags.INACTIVE)&&(t.disabled=!0),t))}function xo(e){var n;const t=(n=e.tags)==null?void 0:n.BACKGROUND;t&&(e.images.push(t),this.state.setSubkey("game","background",t))}function Lo(e){[So,Co,xo].forEach(t=>e.game.defineSceneProcessor(t.bind(e)))}function Po(e){e.ink.story().onError=t=>{e.state.setKey("ERROR",t)},e.state.setKey("OVERLAY",{activeOverlay:null,content:""})}function To(e){return e=e.replace(/\[red\](.+?)\[\/red\]/g,'<span class="highlight">$1</span>'),e.startsWith(">>+")&&(e=e.replace(">>+",""),e=`<span class="take">${e}</span>`),e.startsWith(">>-")&&(e=e.replace(">>-",""),e=`<span class="drop">${e}</span>`),e.startsWith(">>>")&&(e=e.replace(">>>",""),e=`<span class="drop">${e}</span>`),e.startsWith(">>!")&&(e=e.replace(">>!",""),e=`<div class="endgame">${e}</div>`),e.startsWith(">>@")&&(e=e.replace(">>@",""),e=`<div class="endgame victory">${e}</div>`),e}function _n(e,t){const n=[];for(let o of t)n.push(new Promise(r=>{const i=new Image;i.onload=r,i.onerror=r,i.src=e(o)}));return Promise.allSettled(n)}async function Ao(e){e.game.defineSceneProcessor(t=>{t.content=t.content.map(n=>({...n,text:To(n.text)}))}),await _n(oe,["written-in-ink.png","images/cover.jpg"])}var Oo={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function Ro(e,t){console.log(Oo),e.on("*",(n,o)=>console.log(`%c Atrament > ${n} `,"color: #111111; background-color: #7FDBFF;",o)),Eo(e),await e.init(t,{applicationID:lo,settings:{fullscreen:!1,animation:!0,mute:!1,volume:50,fontSize:100}}),e.on("game/start",()=>Po(e)),fo(e.game.getAssetPath),await e.game.init(sn,cn),await e.game.initInkStory(),ho(e),po(e),Lo(e),_o(e),await Ao(e)}const Io="_application_wrapper_6fi81_1",Fo={application_wrapper:Io};let Se;function dn(){window.innerHeight!==Se&&(Se=window.innerHeight,document.documentElement.style.setProperty("--screen-vh",`${Se-1}px`))}window.addEventListener("resize",dn);const Ct=({children:e})=>(A(dn,[]),c("div",{class:[Fo.application_wrapper,"atrament-ui-app"].join(" "),children:e})),Mo="_loading_ffxmc_1",Vo={loading:Mo},Ho="_container_4l08p_1",jo={container:Ho},$e=({children:e,style:t})=>c("div",{style:t,class:[jo.container,"atrament-container"].join(" "),children:e}),Do="_container_flex_at0vo_1",zo={container_flex:Do},Xe=({children:e})=>c("div",{class:[zo.container_flex,"atrament-flex-container"].join(" "),children:e}),Bo="_sk_cube_grid_fv0g6_1",Wo="_sk_cube1_fv0g6_17",Uo="_sk_cube2_fv0g6_18",No="_sk_cube3_fv0g6_19",qo="_sk_cube4_fv0g6_20",Go="_sk_cube5_fv0g6_21",Yo="_sk_cube6_fv0g6_22",Ko="_sk_cube7_fv0g6_23",Xo="_sk_cube8_fv0g6_24",Jo="_sk_cube9_fv0g6_25",I={sk_cube_grid:Bo,"sk-cubeGridScaleDelay":"_sk-cubeGridScaleDelay_fv0g6_1",sk_cube1:Wo,sk_cube2:Uo,sk_cube3:No,sk_cube4:qo,sk_cube5:Go,sk_cube6:Yo,sk_cube7:Ko,sk_cube8:Xo,sk_cube9:Jo},Qo=()=>c("div",{class:I.sk_cube_grid,children:[c("div",{class:I.sk_cube1}),c("div",{class:I.sk_cube2}),c("div",{class:I.sk_cube3}),c("div",{class:I.sk_cube4}),c("div",{class:I.sk_cube5}),c("div",{class:I.sk_cube6}),c("div",{class:I.sk_cube7}),c("div",{class:I.sk_cube8}),c("div",{class:I.sk_cube9})]}),Zo=()=>c($e,{children:c(Xe,{children:c("div",{class:[Vo.loading,"atrament-loading"].join(" "),children:c(Qo,{})})})});function er(e,t,n){let o=new Set([...t,void 0]);return e.listen((r,i,s)=>{o.has(s)&&n(r,i,s)})}function tr(e,t={}){let[,n]=R({}),[o]=R(e.get());return A(()=>{o!==e.get()&&n({})},[]),A(()=>{let r,i,s,l=()=>{r||(r=1,i=setTimeout(()=>{r=void 0,n({})}))};return t.keys?s=er(e,t.keys,l):s=e.listen(l),()=>{s(),clearTimeout(i)}},[e,""+t.keys]),e.get()}const C=()=>{const e=qe(rn),t=tr(e.store);return{atrament:e,state:t,canResume:e.game.canResume,gameStart:e.game.start,gameResume:e.game.resume,makeChoice:e.game.makeChoice,continueStory:e.game.continueStory,updateSettings:(n,o)=>{e.settings.set(n,o),e.settings.save()}}},nr="_block_5hv3c_1",or="_block_start_5hv3c_6",rr="_block_end_5hv3c_10",Ce={block:nr,block_start:or,block_end:rr},Je=({children:e,align:t})=>{const n=[Ce.block];return t==="start"?n.push(Ce.block_start):t==="end"&&n.push(Ce.block_end),n.push("atrament-block"),c("div",{class:n.join(" "),children:e})},ir="_header_1v1u3_1",sr="_header_align_1v1u3_9",xt={header:ir,header_align:sr},cr=({children:e})=>c("div",{class:[xt.header,"atrament-header"].join(" "),children:c("div",{class:xt.header_align,children:e})}),ar="_link_menu_or3gt_1",lr={link_menu:ar},ge=({children:e,key:t,onClick:n})=>c("div",{children:c("button",{onClick:n,class:lr.link_menu,children:e},t)}),ur="_settings_container_6aa0z_1",_r="_settings_toggle_6aa0z_12",Lt={settings_container:ur,settings_toggle:_r},dr="_backdrop_rne3i_1",fr={backdrop:dr},fn=({onClick:e})=>c("div",{class:[fr.backdrop,"atrament-backdrop"].join(" "),onClick:e}),hr="_modal_1n9pe_1",pr={modal:hr},hn=({children:e})=>c("div",{class:[pr.modal,"atrament-modal"].join(" "),children:e}),gr="_close_1pbtv_1",mr={close:gr},pn=({onClick:e})=>c("div",{class:mr.close,children:c("button",{onClick:e,title:"Close",children:"✕"})}),vr="_checkbox_wrapper_1bc4s_1",yr="_checkbox_1bc4s_1",Pt={checkbox_wrapper:vr,checkbox:yr,"focus-visible":"_focus-visible_1bc4s_56"},Qe=({enabled:e,onChange:t})=>c("div",{class:Pt.checkbox_wrapper,children:c("input",{type:"checkbox",class:Pt.checkbox,checked:e,onChange:t})}),br=()=>{const{state:e,updateSettings:t}=C(),n=o=>t("fullscreen",o.target.checked);return c("div",{class:["atrament-settings-fullscreen"].join(" "),children:[c(Qe,{enabled:e.settings.fullscreen,onChange:n})," ",c(F,{id:"settings.fullscreen"})]})},kr="_settings_sound_container_1bw8e_1",wr="_settings_sound_input_container_1bw8e_6",$r="_settings_sound_volume_1bw8e_10",Er="_settings_sound_icon_1bw8e_17",N={settings_sound_container:kr,settings_sound_input_container:wr,settings_sound_volume:$r,settings_sound_icon:Er},Sr=()=>{const{state:e,updateSettings:t}=C(),n=s=>t("mute",!s.target.checked),o=s=>t("volume",s.target.value),{mute:r,volume:i}=e.settings;return c(V,{children:[c("div",{class:[N.settings_sound,"atrament-settings-sound"].join(" "),children:[c(Qe,{enabled:!r,onChange:n})," ",c(F,{id:"settings.sound"})]}),c("div",{class:N.settings_sound_container,children:[c("div",{class:N.settings_sound_icon,children:"🔉"}),c("div",{class:N.settings_sound_input_container,children:c("input",{class:N.settings_sound_volume,disabled:r,type:"range",min:"0",max:"100",value:i,onChange:o})}),c("div",{class:N.settings_sound_icon,children:"🔊"})]})]})},Cr="_settings_fontsize_container_1ho7s_1",xr="_settings_font_a_1ho7s_6",Lr="_settings_fontsize_input_container_1ho7s_12",Pr="_settings_fontsize_input_1ho7s_12",Tr="_settings_font_sample_1ho7s_22",z={settings_fontsize_container:Cr,settings_font_a:xr,settings_fontsize_input_container:Lr,settings_fontsize_input:Pr,settings_font_sample:Tr},gn=[];for(let e=je;e<=De;e+=we)gn.push(e);const Ar=()=>{const{state:e,updateSettings:t}=C(),{font:n,fontSize:o}=e.settings,r=i=>t("fontSize",i.target.value);return c("div",{class:[z.settings_text,"atrament-settings-text"].join(" "),children:[c("div",{class:z.settings_fontsize_container,children:[c("div",{class:z.settings_font_a,style:{"font-size":`${je}%`},children:"A"}),c("div",{class:z.settings_fontsize_input_container,children:[c("input",{class:z.settings_fontsize_input,type:"range",min:je,max:De,step:we,value:o||Ke,onInput:r,list:"fontSizes"}),c("datalist",{id:"fontSizes",children:gn.map(i=>c("option",{value:i},i))})]}),c("div",{class:z.settings_font_a,style:{"font-size":`${De}%`},children:"A"})]}),c("div",{class:z.settings_font_sample,style:{"font-size":`${o}%`,"font-family":re[n]},children:c(F,{id:"font.sampleText"})})]})},Or="_settings_font_container_7sjw1_1",Rr={settings_font_container:Or},Ir=()=>{const{state:e,updateSettings:t}=C(),n=r=>t("font",r.target.value),o=e.settings.font;return c("div",{class:[Rr.settings_font_container,"atrament-settings-font"].join(" "),children:c("select",{onChange:n,style:{"font-family":re[o]},children:Object.entries(re).map(([r,i])=>c("option",{value:r,style:{"font-family":i},selected:o===r,children:r},r))})})},Fr="_settings_theme_container_7cfqz_1",Mr="_settings_theme_button_7cfqz_7",mn={settings_theme_container:Fr,settings_theme_button:Mr},Vr=({themeId:e,themeConfig:t,onClick:n})=>{const o={color:t["--fg-color"],"background-color":t["--bg-color"]};return c("button",{class:mn.settings_theme_button,style:o,onClick:n,"data-theme-id":e,children:c(F,{id:`themes.${e}`,defaultMessage:e})})},Hr=()=>{const{updateSettings:e}=C(),t=n=>e("theme",n.target.attributes["data-theme-id"].value);return c("div",{class:[mn.settings_theme_container,"atrament-settings-theme"].join(" "),children:Object.entries(ze).map(([n,o])=>c(Vr,{themeId:n,themeConfig:o,onClick:t},n))})},jr=()=>{const{state:e,updateSettings:t}=C(),n=o=>t("animation",o.target.checked);return c("div",{class:["atrament-settings-animation"].join(" "),children:[c(Qe,{enabled:e.settings.animation,onChange:n})," ",c(F,{id:"settings.animations"})]})},Dr="_settings_about_hjypz_1",zr={settings_about:Dr},Br=()=>{const{atrament:e}=C();return c("div",{class:zr.settings_about,children:["atrament ",e.version]})},Ze=()=>{const[e,t]=R(!1),n=O(()=>t(!e),[e]),o=O(r=>{r.key==="Escape"&&n()},[n]);return A(()=>(document.addEventListener("keydown",o,!1),()=>{document.removeEventListener("keydown",o,!1)}),[o]),e?c("div",{class:Lt.settings_container,children:[c(fn,{onClick:n}),c(hn,{children:[c(pn,{onClick:n}),c(br,{}),c(jr,{}),c(Sr,{}),c(Ir,{}),c(Ar,{}),c(Hr,{}),c(Br,{})]})]}):c("button",{class:Lt.settings_toggle,onClick:n,children:"☰"})},Wr=()=>{const e=on(),{state:t,canResume:n,gameStart:o,gameResume:r}=C(),{title:i,author:s}=t.metadata,[l,u]=R(!1);A(()=>{(async()=>{const d=await n();u(!!d)})()},[n]);const _=O(async()=>{await o(),G("/game")},[o]),f=O(async()=>{await r(),G("/game")},[r]),a=()=>G("/about");return c($e,{children:c(Xe,{children:[c(Ze,{}),c(cr,{children:[c("img",{src:"game/images/cover.jpg",style:{width:"50%"}}),c("h1",{children:i||e.translate("default.title")}),c("p",{children:s||e.translate("default.author")})]}),c(Je,{align:"end",children:[l?c(ge,{onClick:f,children:c(F,{id:"main.continue"})},"continuegame"):"",c(ge,{onClick:_,children:c(F,{id:"main.newgame"})},"startgame"),c(ge,{onClick:a,children:c(F,{id:"main.about"})},"about")]})]})})},Ur="_error_modal_1tmey_1",Nr="_error_message_1tmey_12",Tt={error_modal:Ur,error_message:Nr},qr=()=>{const{atrament:e,state:t}=C(),n=O(()=>e.state.setKey("ERROR",null),[e]),o=O(r=>{r.key==="Escape"&&n()},[n]);if(A(()=>(document.addEventListener("keydown",o,!1),()=>{document.removeEventListener("keydown",o,!1)}),[o]),t.ERROR)return c("div",{class:Tt.error_modal,children:[c(fn,{onClick:n}),c(hn,{children:[c(pn,{onClick:n}),c("p",{class:Tt.error_message,children:t.ERROR})]})]})},Gr="_toolbar_15qb8_1",Yr={toolbar:Gr},Kr="_inline_button_mhbrv_1",Xr="_bordered_button_mhbrv_20",At={inline_button:Kr,bordered_button:Xr};function ce(e){const t=e.match(/(\w+)=["']?((?:.?(?!["']?\s+(?:\S+)=|\s*\/?[>"']))+.)["']?/g),n={};return t&&t.forEach(o=>{const[,r,i]=o.match(/(.+)=(.+)/);try{n[r]=JSON.parse(i)}catch{n[r]=i}}),n}function Ot(e,t){let n;try{n=e.ink.evaluateFunction(t,[],!0)}catch(o){e.ink.story().onError(o.toString())}return n}function Rt(e,t,n){e.state.setSubkey("OVERLAY","activeOverlay",t);let o=n;const r=n.split(`
`),s=r.shift().match(/\[title\](.+?)\[\/title\]/i);s&&(e.state.setSubkey("OVERLAY","title",s[1]),o=r.join(`
`)),e.state.setSubkey("OVERLAY","content",o)}const Jr=({children:e,options:t})=>{const{atrament:n,state:o}=C(),r=O(()=>{const s=Ot(n,t.onclick);if(s.output)Rt(n,t.onclick,s.output);else{const l=o.OVERLAY.activeOverlay;if(l){const u=Ot(n,l);Rt(n,l,u.output)}}},[n,t.onclick,o]);let i=t.bordered===!1?At.inline_button:At.bordered_button;return c("button",{class:i,onClick:r,disabled:t.disabled,children:e})},Qr={regexp:/\[button.+?\].+?\[\/button\]/ig,replacer:(e,t)=>{const n=e.match(/\[button(.+?)\](.+?)\[\/button\]/i);let o=n[1];o.startsWith("=")&&(o=`onclick${o}`);const r=ce(o);return c(Jr,{options:r,children:t(n[2])})}},Zr="_inline_image_1jlev_1",ei={inline_image:Zr},ti={regexp:/\[img\].+?\[\/img\]/ig,replacer:e=>{const t=e.match(/\[img\](.+?)\[\/img\]/i);return c("img",{class:ei.inline_image,src:oe(t[1])})}},ni="_inline_link_1di4e_1",oi={inline_link:ni},ri=({children:e,choice:t})=>{const{atrament:n,state:o,makeChoice:r,continueStory:i}=C(),s=O(()=>{const l=o.scenes.length-1,_=o.scenes[l].choices.findIndex(f=>f.choice===t);if(_<0){n.state.setKey("ERROR",`[link=${t}] leads to nonexistent choice!`);return}r(_),i()},[n,i,r,t,o]);return c("a",{href:"#",class:oi.inline_link,onClick:s,children:e})},ii={regexp:/\[link=.+?\].+?\[\/link\]/ig,replacer:(e,t)=>{const n=e.match(/\[link=(.+?)\](.+?)\[\/link\]/i);return c(ri,{choice:n[1],children:t(n[2])})}},si="_progress_frame_1amm3_1",ci="_progress_bar_1amm3_7",ai="_standard_1amm3_14",li="_accent_1amm3_18",ui="_progress_content_1amm3_22",X={progress_frame:si,progress_bar:ci,standard:ai,accent:li,progress_content:ui},_i=({options:e,children:t})=>{const n=+e.min||0,o=+e.max||100,r=+e.value||0;let i=r?(r-n)*100/(o-n):0;i>100&&(i=100),i<0&&(i=0);const s=[X.progress_bar];return e.style==="accent"?s.push(X.accent):s.push(X.standard),c("div",{class:X.progress_frame,children:[c("div",{class:s.join(" "),style:{width:`${i}%`}}),c("div",{class:X.progress_content,children:[t," "]})]})},di={regexp:/\[progress.+?\].*?\[\/progress\]/ig,replacer:(e,t)=>{const n=e.match(/\[progress(.+?)\](.*?)\[\/progress\]/i),o=ce(n[1]);return c(_i,{options:o,children:t(n[2])})}},fi="_input_3mjk6_1",hi={input:fi};function pi(e,t,n){try{e.ink.setVariable(t,n)}catch(o){e.ink.story().onError(o.toString())}}function gi(e,t){let n;try{n=e.ink.getVariable(t)}catch(o){e.ink.story().onError(o.toString())}return n}const mi=({inactive:e,options:t})=>{const[n,o]=R(null),{atrament:r}=C();A(()=>o(gi(r,t.var)),[r,t.var]);const i=l=>{let u=l.srcElement.value||n;t.type==="number"&&(u=+u),pi(r,t.var,u),o(u)},s=t.type==="number"?"number":"text";return c("input",{disabled:e,class:hi.input,value:n,placeholder:t.placeholder,type:s,onInput:i})},vi={regexp:/\[input.+?\]/ig,replacer:(e,t,n)=>{const o=e.match(/\[input(.+?)\]/i),r=ce(o[1]);return c(mi,{inactive:n,options:r})}},yi="_hidden_1sp64_1",bi="_revealed_1sp64_12",It={hidden:yi,revealed:bi},ki=[It.hidden,It.revealed],wi=({children:e})=>{const[t,n]=R(0);return c("span",{class:ki[t],onClick:()=>n(1-t),children:c("span",{children:e})})},$i={regexp:/\[spoiler\].*?\[\/spoiler\]/ig,replacer:(e,t)=>{const n=e.match(/\[spoiler\](.*?)\[\/spoiler\]/i);return c(wi,{children:t(n[1])})}},Ei="_infoblock_ogb2m_1",Si="_font_ui_ogb2m_9",Ci="_side_highlight_ogb2m_13",xi="_side_accent_ogb2m_17",_e={infoblock:Ei,font_ui:Si,side_highlight:Ci,side_accent:xi},Li=({children:e,options:t})=>{const n=[_e.infoblock];return t.font==="system"&&n.push(_e.font_ui),t.side&&(t.side==="accent"?n.push(_e.side_accent):n.push(_e.side_highlight)),c("div",{class:n.join(" "),children:e})},Pi={regexp:/\[info.*?\].*?\[\/info\]/ig,replacer:(e,t)=>{const n=e.match(/\[info(.*?)\](.*?)\[\/info\]/i),o=ce(n[1]);return c(Li,{options:o,children:t(n[2])})}},Ti="_bannerblock_12icp_1",Ai="_accent_12icp_11",Oi="_allcaps_12icp_17",xe={bannerblock:Ti,accent:Ai,allcaps:Oi},Ri=({children:e,options:t})=>{const n=[xe.bannerblock];return t.style==="accent"&&n.push(xe.accent),t.allcaps&&n.push(xe.allcaps),c("div",{class:n.join(" "),children:e})},Ii={regexp:/\[banner.*?\].*?\[\/banner\]/ig,replacer:(e,t)=>{const n=e.match(/\[banner(.*?)\](.*?)\[\/banner\]/i),o=ce(n[1]);return c(Ri,{options:o,children:t(n[2])})}},Fi=[Qr,ti,ii,di,vi,$i,Pi,Ii],Mi=e=>/<\/?[a-z][\s\S]*>/i.test(e);function Vi(e,t,n,o){let r=e;if(typeof e!="string")return r;const i=e.split(t),s=e.match(t);return s&&(r=i.flatMap((l,u)=>u<s.length?[l,n(s[u],_=>ae(_,o),o)]:[l])),r}function ae(e,t){let n=[e];return Fi.forEach(o=>{n=n.flatMap(r=>Vi(r,o.regexp,o.replacer,t))}),n.filter(o=>o).map((o,r)=>typeof o=="string"&&Mi(o)?c("span",{dangerouslySetInnerHTML:{__html:o}},r):o)}const Hi=()=>{const e=on(),{atrament:t,state:n}=C(),[o,r]=R(!1);let i=n.metadata.title||e.translate("default.title");if(n.metadata.toolbar&&!o)try{const l=t.ink.evaluateFunction(n.metadata.toolbar,[],!0);l.output&&(i=l.output)}catch(l){t.ink.story().onError(l.toString()),r(!0)}const s=ae(i);return c("div",{class:[Yr.toolbar,"atrament-toolbar"].join(" "),children:s})},ji="_container_text_z4l34_1",Di={container_text:ji},et=({children:e,fontSize:t})=>c("div",{class:[Di.container_text,"atrament-text-container"].join(" "),style:{"font-size":`${t}%`},children:e}),zi="_container_scenes_13lih_1",Bi={container_scenes:zi},Wi=e=>({top:"start",start:"start",middle:"center",bottom:"end",end:"end"})[e]||"center",Ui=({children:e,align:t})=>c("div",{class:[Bi.container_scenes,"atrament-container-scene"].join(" "),style:{"justify-content":Wi(t)},children:e}),Ni="_container_choices_41rpm_1",qi={container_choices:Ni},Gi=({children:e,key:t,isReady:n})=>c("div",{class:[qi.container_choices,"atrament-container-choices",n?"animation_appear":""].join(" "),children:c("div",{style:{opacity:n?1:0},children:c(Je,{children:e})})},t),Yi="_scene_1or5e_1",Ki={scene:Yi},vn=e=>e===void 0||e==="auto"||e==="instant"||e==="smooth";function Xi(e,t){this.scrollLeft=e,this.scrollTop=t}const yn=(e,t,n="cannot convert to dictionary.")=>`Failed to execute '${e}' on '${t}': ${n}`,bn=(e,t,n)=>yn(e,t,`The provided value '${n}' is not a valid enum value of type ScrollBehavior.`),Ft=(e,t,n)=>{var o;const r=`__SEAMLESS.BACKUP$${t}`;return!e[r]&&e[t]&&!(!((o=e[t])===null||o===void 0)&&o.__isPolyfill)&&(e[r]=e[t]),e[r]||n},Ji=e=>{const t=typeof e;return e!==null&&(t==="object"||t==="function")},tt=e=>e.ownerDocument.scrollingElement||e.ownerDocument.documentElement;function Qi(e){if(typeof Event=="function")return new Event("scrollend",{bubbles:e,cancelable:!1});const t=document.createEvent("Event");return t.initEvent("scrollend",e,!1),t}const Zi=e=>.5*(1-Math.cos(Math.PI*e));function nt(){var e;let t;return!((e=window.performance)===null||e===void 0)&&e.now?t=()=>window.performance.now():t=()=>window.Date.now(),nt=t,t()}const es=500,kn=e=>{const n=(nt()-e.timeStamp)/(e.duration||es);if(n>1){e.method(e.targetX,e.targetY),e.callback();return}const o=(e.timingFunc||Zi)(n),r=e.startX+(e.targetX-e.startX)*o,i=e.startY+(e.targetY-e.startY)*o;e.method(r,i),e.rafId=window.requestAnimationFrame(()=>{kn(e)})},ye=e=>isFinite(e)?Number(e):0,ts=e=>{var t;return(t=e.isConnected)!==null&&t!==void 0?t:!e.ownerDocument||!(e.ownerDocument.compareDocumentPosition(e)&1)},ns=(e,t,n)=>{var o,r;if(!ts(e))return;const i=e.scrollLeft,s=e.scrollTop,l=ye((o=t.left)!==null&&o!==void 0?o:i),u=ye((r=t.top)!==null&&r!==void 0?r:s);if(l===i&&u===s)return;const _=Ft(HTMLElement.prototype,"scroll",Xi),f=Ft(Object.getPrototypeOf(e),"scroll",_).bind(e);if(t.behavior!=="smooth"){f(l,u);return}const a=()=>{window.removeEventListener("wheel",h),window.removeEventListener("touchmove",h)},p=()=>{a();const k=e.nodeType===9;e.dispatchEvent(Qi(k))},d=Object.assign(Object.assign({},n),{timeStamp:nt(),startX:i,startY:s,targetX:l,targetY:u,rafId:0,method:f,callback:p}),h=()=>{window.cancelAnimationFrame(d.rafId),a()};window.addEventListener("wheel",h,{passive:!0,once:!0}),window.addEventListener("touchmove",h,{passive:!0,once:!0}),kn(d)},os=e=>e.window===e,rs=e=>(t,n,o)=>{const[r,i]=os(t)?[tt(t.document.documentElement),"Window"]:[t,"Element"],s=n??{};if(!Ji(s))throw new TypeError(yn(e,i));if(!vn(s.behavior))throw new TypeError(bn(e,i,s.behavior));e==="scrollBy"&&(s.left=ye(s.left)+r.scrollLeft,s.top=ye(s.top)+r.scrollTop),ns(r,s,o)},is=rs("scroll"),ss=is,wn=e=>{switch(e){case"horizontal-tb":case"lr":case"lr-tb":case"rl":case"rl-tb":return 0;case"vertical-rl":case"tb":case"tb-rl":return 1;case"vertical-lr":case"tb-lr":return 2;case"sideways-rl":return 3;case"sideways-lr":return 4}return 0},$n=(e,t,n,o)=>{let r=0;switch(t||(r^=2),e){case 0:r=r>>1|(r&1)<<1,[n,o]=[o,n];break;case 1:case 3:r^=1;break;case 4:r^=2;break}return[r,n,o]},cs=e=>($n(wn(e.writingMode),e.direction!=="rtl",void 0,void 0)[0]&1)===1,as=(e,t,n)=>{const[o,r,i]=$n(t,n,e.block||"start",e.inline||"nearest");return[r,i].map((s,l)=>{switch(s){case"center":return 1;case"nearest":return 0;default:{const u=o>>l&1;return s==="start"==!u?2:3}}})},Mt=(e,t,n,o,r,i,s)=>e!==0?e:r<t&&i>n||r>t&&i<n?null:r<=t&&s<=o||i>=n&&s>=o?2:i>n&&s<o||r<t&&s>o?3:null,Vt=e=>e!=="visible"&&e!=="clip",ls=e=>{var t;try{return((t=e.ownerDocument.defaultView)===null||t===void 0?void 0:t.frameElement)||null}catch{return null}},us=(e,t)=>e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth?Vt(t.overflowY)||Vt(t.overflowX)||e===tt(e):!1,Ht=e=>{const t=e.parentNode,n=e.parentElement;if(n===null&&t!==null){if(t.nodeType===11)return t.host;if(t.nodeType===9)return ls(e)}return n},Le=(e,t,n)=>e<t?t:e>n?n:e,_s=e=>["scroll-margin","scroll-snap-margin"].filter(t=>t in e.documentElement.style)[0],ds=(e,t,n)=>{const{top:o,right:r,bottom:i,left:s}=t,l=_s(e.ownerDocument);if(!l)return[o,r,i,s];const u=_=>{const f=n.getPropertyValue(`${l}-${_}`);return parseInt(f,10)||0};return[o-u("top"),r+u("right"),i+u("bottom"),s-u("left")]},de=(e,t,n)=>{switch(e){case 1:return(t+n)/2;case 3:return n;case 2:case 0:return t}},fs=(e,t)=>{var n,o,r;const i=(n=e.ownerDocument.defaultView)===null||n===void 0?void 0:n.visualViewport,[s,l,u,_]=e===tt(e)?[0,0,(o=i==null?void 0:i.width)!==null&&o!==void 0?o:e.clientWidth,(r=i==null?void 0:i.height)!==null&&r!==void 0?r:e.clientHeight]:[t.left,t.top,e.clientWidth,e.clientHeight],f=s+e.clientLeft,a=l+e.clientTop,p=f+u,d=a+_;return[a,p,d,f]},hs=(e,t)=>{const n=[];let o=e.ownerDocument,r=o.defaultView;if(!r)return n;const i=window.getComputedStyle(e),s=i.direction!=="rtl",l=wn(i.writingMode||i.getPropertyValue("-webkit-writing-mode")||i.getPropertyValue("-ms-writing-mode")),[u,_]=as(t,l,s);let[f,a,p,d]=ds(e,e.getBoundingClientRect(),i);for(let h=Ht(e);h!==null;h=Ht(h)){if(o!==h.ownerDocument){if(o=h.ownerDocument,r=o.defaultView,!r)break;const{left:ot,top:rt}=h.getBoundingClientRect();f+=rt,a+=ot,p+=rt,d+=ot}const k=r.getComputedStyle(h);if(k.position==="fixed")break;if(!us(h,k))continue;const y=h.getBoundingClientRect(),[m,w,g,v]=fs(h,y),E=Mt(u,v,w,h.clientWidth,d,a,a-d),x=Mt(_,m,g,h.clientHeight,f,p,p-f),P=E===null?0:de(E,d,a)-de(E,v,w),K=x===null?0:de(x,f,p)-de(x,m,g),L=cs(k)?Le(P,-h.scrollWidth+h.clientWidth-h.scrollLeft,-h.scrollLeft):Le(P,-h.scrollLeft,h.scrollWidth-h.clientWidth-h.scrollLeft),H=Le(K,-h.scrollTop,h.scrollHeight-h.clientHeight-h.scrollTop);n.push([h,{left:h.scrollLeft+L,top:h.scrollTop+H,behavior:t.behavior}]),f=Math.max(f-H,m),a=Math.min(a-L,w),p=Math.min(p-H,g),d=Math.max(d-L,v)}return n},ps=(e,t,n)=>{const o=t||{};if(!vn(o.behavior))throw new TypeError(bn("scrollIntoView","Element",o.behavior));hs(e,o).forEach(([i,s])=>{ss(i,s,n)})},gs="_imagebox_hmqoq_1",ms="_image_hmqoq_1",jt={imagebox:gs,image:ms},vs=({src:e})=>e?c("div",{class:[jt.imagebox,"atrament-image-container"].join(" "),children:c("img",{src:e,class:[jt.image,"atrament-image"].join(" ")})}):"",ys=({content:e,isCurrent:t})=>{let n;return t||(n={opacity:"70%"}),e===`
`?"":c("p",{style:n,children:ae(e,!t)})},bs=({scene:e,isCurrent:t,isSingle:n,readyHandler:o})=>{const[r,i]=R(!1),s=Fn(null),l=O(u=>{o(!0),setTimeout(()=>{ps(s.current,{behavior:u,block:"start"},{duration:300})},100)},[o]);return A(()=>{r&&t&&l(n?"instant":"smooth")},[r,t,n,l]),A(()=>{(async()=>{await _n(oe,e.images),i(!0)})()},[e,i]),c("div",{class:[Ki.scene,"atrament-scene",t&&r?"animation_appear":""].join(" "),ref:s,children:c("div",{style:{opacity:r?1:0},children:e.content.map((u,_)=>c(V,{children:[u.image&&c(vs,{src:oe(u.image)}),c(ys,{isCurrent:t,content:u.text})]},`paragraph-${e.uuid}-${_}`))})})},ks="_link_home_8i3aw_1",ws={link_home:ks},$s=({children:e,onClick:t})=>c("button",{onClick:t,class:ws.link_home,children:e},"mainmenu"),Es="_choice_button_m4zx4_1",Ss="_choice_active_m4zx4_20",Cs="_choice_inactive_m4zx4_44",xs="_disappear_m4zx4_1",Pe={choice_button:Es,choice_active:Ss,choice_inactive:Cs,disappear:xs},Ls=({choice:e,chosen:t,handleClick:n})=>{const o=t!==null,r=t===e.id,i=()=>{o||n(e.id)};return c("button",{class:`${Pe.choice_button} ${o?r?Pe.choice_active:Pe.choice_inactive:""}`,onClick:i,disabled:e.disabled,children:ae(e.choice)})},Ps=({key:e,currentScene:t,setReady:n})=>{const{makeChoice:o,continueStory:r}=C(),[i,s]=R(null),l=t&&t.choices?t.choices.length:-1,u=O(f=>{const a=l>1?350:150;s(f),setTimeout(()=>{setTimeout(()=>{s(null),n(!1),o(f),r()},a)},0)},[o,r,n,l]),_=O(f=>{const a=+f.key;f.target.tagName.toLowerCase()!=="input"&&l>0&&a>0&&a<=l&&!t.choices[a-1].disabled&&u(a-1)},[l,u,t.choices]);return A(()=>(document.addEventListener("keydown",_,!1),()=>{document.removeEventListener("keydown",_,!1)}),[_]),c(V,{children:t.choices.map((f,a)=>c(Ls,{choice:f,chosen:i,handleClick:u},`${e}-${a}`))})},Ts=()=>{const{atrament:e}=C();return c($s,{onClick:async()=>{await e.game.removeSave(),G("/")},children:c(F,{id:"game.end"})})},As=({key:e,currentScene:t,setReady:n,isHypertextMode:o})=>{const r=t&&t.choices?t.choices.length:-1;if(r===0)return c(Ts,{});if(r>=0&&!o)return c(Ps,{currentScene:t,setReady:n},e)},Os=()=>{var s;const{state:e}=C(),[t,n]=R(!1),o=e.scenes.length-1,r=!!e.metadata.hypertext,i=`choices-${(s=e.scenes[o])==null?void 0:s.uuid}`;return c(et,{fontSize:e.settings.fontSize,children:[c(Ui,{align:e.metadata.scenes_align,children:e.scenes.map((l,u)=>c(bs,{scene:l,isCurrent:u===o,isSingle:o===0,readyHandler:n},l.uuid))}),c(Gi,{isReady:t,children:c(As,{currentScene:e.scenes[o],setReady:n,isHypertextMode:r},i)},i)]})},Rs="_overlay_container_136uq_1",Is="_overlay_header_136uq_11",Fs="_overlay_title_136uq_25",Ms="_overlay_content_136uq_31",Vs="_button_back_136uq_46",J={overlay_container:Rs,overlay_header:Is,overlay_title:Fs,overlay_content:Ms,button_back:Vs},Hs=()=>{const{atrament:e,state:t}=C(),n=O(()=>{e.state.setSubkey("OVERLAY","activeOverlay",null),e.state.setSubkey("OVERLAY","content","")},[e]);if(!t.OVERLAY.activeOverlay)return c(V,{});const o=t.OVERLAY.content.split(`
`),r=t.OVERLAY.title;return c("div",{class:J.overlay_container,children:[c("div",{class:J.overlay_header,children:[c("button",{class:J.button_back,onClick:n,children:"❮"}),r&&c("div",{class:J.overlay_title,children:r})]}),c("div",{class:[J.overlay_content,"atrament-overlay"].join(" "),children:c(et,{fontSize:t.settings.fontSize,children:o.map((i,s)=>c("p",{children:ae(i)},s))})})]})},js=()=>{const{state:e,continueStory:t}=C();A(()=>{t()},[t]);let n={};return e.game.background&&(n={"background-image":`url(${oe(e.game.background)})`,"background-size":"cover","background-position":"center"}),c($e,{style:n,children:[c(Ze,{}),c(qr,{}),c(Hi,{}),c(Hs,{}),c(Os,{})]})},Ds=()=>{const{state:e}=C(),t=()=>G("/");return c($e,{children:[c(Ze,{}),c(et,{fontSize:e.settings.fontSize,children:[c(Xe,{children:c("div",{style:"text-align: center; flex-grow: 1; display: flex; flex-direction: column; justify-content: center",children:[c("h1",{children:"The Coiled Crown"}),c("p",{children:["(c) 2021 ",c("a",{href:"https://tridentgamebooks.com/",target:"_blank",rel:"noreferrer",children:"Trident Gamebooks, LLC"}),". All rights reserved. Gamebook text used with permission."]}),c("p",{children:["The gamebook is adapted for ",c("a",{href:"https://www.inklestudios.com/ink/",target:"_blank",rel:"noreferrer",children:"Ink"})," and ",c("a",{href:"https://github.com/technix/atrament-core",target:"_blank",rel:"noreferrer",children:"Atrament"})," by ",c("a",{href:"https://technix.in.ua/",target:"_blank",rel:"noreferrer",children:'Serhii "techniX" Mozhaiskyi'}),"."]}),c("p",{children:["Music by ",c("a",{href:"https://n91music.itch.io/",target:"_blank",rel:"noreferrer",children:"N91Music"}),"."]}),c("p",{children:c("img",{src:"game/written-in-ink.png",style:"width: 30%; padding: 1rem"})})]})}),c(Je,{children:c(ge,{onClick:t,children:c(F,{id:"main.menu"})},"mainmenu")})]})]})},zs=[{language:"en",messages:{"default.title":"Atrament UI","default.author":"Test Application","main.menu":"Main menu","main.newgame":"New game","main.continue":"Continue","main.about":"About","game.end":"The end","settings.fullscreen":"Fullscreen","settings.animations":"Animations","settings.sound":"Sound","themes.light":"light","themes.sepia":"sepia","themes.dark":"dark","font.sampleText":"The quick brown fox jumps over the lazy dog. Jackdaws love my big sphinx of quartz."}},{language:"ua",messages:{"default.title":"Atrament UI","default.author":"Тестовий застосунок","main.menu":"Головне меню","main.newgame":"Нова гра","main.continue":"Продовжити","main.about":"Про застосунок","game.end":"Кінець","settings.fullscreen":"На весь екран","settings.animations":"Анімації","settings.sound":"Звук","themes.light":"Світла","themes.sepia":"Сепія","themes.dark":"Темна","font.sampleText":"Хвацький юшковар Філіп щодня на ґанку готує сім'ї вечерю з жаб."}}];let fe;function Bs(){const[e,t]=R(!1);A(()=>{(async()=>{fe=(await lt(()=>import("./index-BKRnBoWm.js"),[],import.meta.url)).default;const{Story:i}=await lt(async()=>{const{Story:s}=await import("./ink-CADOJafZ.js");return{Story:s}},[],import.meta.url);await Ro(fe,i),t(!0)})()},[]);const n=O(o=>{o.url==="/"&&o.previous&&fe.game.clear()},[]);return e?c(to,{language:uo,locales:zs,children:c(rn.Provider,{value:fe,children:c(Ct,{children:c(tn,{history:Yn(),onChange:n,children:[c(Wr,{path:"/"}),c(js,{path:"/game"}),c(Ds,{path:"/about"})]})})})}):c(Ct,{children:c(Zo,{})})}Pn(c(Bs,{}),document.getElementById("app"));
